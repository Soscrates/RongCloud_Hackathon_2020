<!--Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE HTML>
<html>
<head>
<title>Simple Weather Widget  Responsive Widget Template | Home :: w3layouts</title>
<link href="css/style.css" rel="stylesheet" type="text/css" media="all"/>
<!-- Custom Theme files -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<meta name="keywords" content="Simple Weather Widget Responsive, Login form web template, Sign up Web Templates, Flat Web Templates, Login signup Responsive web template, Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
<!--google fonts-->
<link href='//fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>

<script src="http://cdn.ronghub.com/RongIMLib-3.0.0-dev.js"></script>
    <script>
        var im = RongIMLib.init({
            appkey: 'pvxdm17jpej8r'
        });

        var conversationList = []; // 当前已存在的会话列表
        im.watch({
            conversation: function(event){
                var updatedConversationList = event.updatedConversationList; // 更新的会话列表
                console.log('更新会话汇总:', updatedConversationList);
                console.log('最新会话列表:', im.Conversation.merge({
                    conversationList: conversationList,
                    updatedConversationList: updatedConversationList
                }));
            },
            message: function(event){
                var message = event.message;
                var Words = document.getElementById("words");
                str = '<div class="btalk"><span>B说 :' + message.content.content +'</span></div>';
                Words.innerHTML = Words.innerHTML + str;
                console.log('收到新消息', message);
            },
            status: function(event){
                var status = event.status;
                switch (status) {
                    case RongIMLib.CONNECTION_STATUS.CONNECTED:
                        console.log('链接成功');
                        break;
                    case RongIMLib.CONNECTION_STATUS.CONNECTING:
                        console.log('正在连接中');
                        break;
                    case RongIMLib.CONNECTION_STATUS.DISCONNECTED:
                        console.log('已主动断开连接');
                        break;
                    case RongIMLib.CONNECTION_STATUS.NETWORK_UNAVAILABLE:
                        console.log('网络不可用'); // SDK 内部会自动进行重连
                        break;
                    case RongIMLib.CONNECTION_STATUS.SOCKET_ERROR:
                        console.log('Socket 链接错误'); // SDK 内部会自动进行重连
                        break;
                    case RongIMLib.CONNECTION_STATUS.KICKED_OFFLINE_BY_OTHER_CLIENT:
                        console.log('其他设备登录, 本端被踢'); // 己端被踢, 不可进行重连. 否则会造成多端循环互踢
                        break;
                    case RongIMLib.CONNECTION_STATUS.BLOCKED:
                        console.log('链接断开, 用户已被封禁');
                        break;
                    default:
                        console.log('链接状态变化为:', status);
                        break;
                }
            }
        });
        var user = {
            token: 'FjmxjnAa42dMBeKRpth8w9LhhAXwZE7NBQDchd6pUKU=@4ujh.cn.rongnav.com;4ujh.cn.rongcfg.com'
        };
        var im = RongIMLib.init({ appkey: 'pvxdm17jpej8r' }); // 初始化 IM 实例(单个页面仅需初始化一次)
        im.connect(user).then(function(user) {
            console.log('链接成功, 链接用户 id 为: ', user.id);

        }).catch(function(error) {
            console.log('链接失败: ', error.code, error.msg);
        });

        var conversation = im.Conversation.get({
            targetId: 'weather_ser',
            type: RongIMLib.CONVERSATION_TYPE.PRIVATE
        });

        function test(sen){
            conversation.send({
                messageType: RongIMLib.MESSAGE_TYPE.TEXT, // 'RC:TxtMsg'
                content: {
                    content: sen // 文本内容
                }
            }).then(function(message){
                console.log('发送文字消息成功', message);
                // var t=document.getElementById("text");
                // t.value += "luyulei" + ":" + message.content.content + "\n"
            });
			
			var dic = new Array();
			dic["Cloudy"] = "cloudy";
			dic["Sunny"] = "sunn";
			dic["Rainy"] = "rain";
			dic["Snowy"] = "cloudy";
			
			document.getElementById("wtoday").innerHTML=sen
			document.getElementById("stoday").src = "images/" + dic[sen] + ".png"
        }
		
    </script>
</head>
<body>
	<h1>Simple Weather Widget</h1>
	<div class="header" >
		<div class="option" style="float:left">
			<select id="slc">
			  <option value ="Cloudy">Cloudy</option>
			  <option value ="Sunny">Sunny</option>
			  <option value="Rainy">Rainy</option>
			  <option value="Snowy">Snowy</option>
			</select>
		</div>
		
		<div align="right">
			<button id="bt1" >submit</button>
		</div>
			
		<div class="header-top">
			<h2><img class="whe" src="images/sun.png" alt="" />Weather</h2>
			<ul>
				<li><p>°F</p></li>
				<li><p class="cen">°C</p></li>
			</ul>
			<div class="clear"> </div>
		</div>
		<div class="header-bottom">

			<div id="h1" class="header-bottom1">
				<div class="header-head">
				<h4 id="wtoday">Cloudy</h4>
				<img id="stoday" src="images/cloudy.png" alt="" />
				<h6>20°</h6>
				<div class="bottom-head">
					<p>August 16</p>
					<p>Monday</p>
				</div>
			</div>
			</div>
			<div id="h2" class="header-bottom1 header-bottom2">
				<div class="header-head">
			<h4>Sunny</h4>
			<img src="images/sunn.png" alt="" />
			<h6>37°</h6>
			<div class="bottom-head">
					<p>August 17</p>
					<p>Tuesday</p>
				</div>
			</div>
			</div>
			<div id="h3" class="header-bottom1">
				<div class="header-head">
				<h4>Rainy</h4>
				<img src="images/rain.png" alt="" />
				<h6>7°</h6>
				<div class="bottom-head">
					<p>August 18</p>
					<p>Wednesday</p>
				</div>
			</div>
			</div>
			<div id="h4" class="header-bottom1 header-bottom2">
				<div class="header-head">
			<h4>Snowy</h4>
			<img src="images/rain.png" alt="" />
			<h6>-10°</h6>
			<div class="bottom-head">
					<p>August 16</p>
					<p>Thursday</p>
				</div>
				</div>
			</div>
			<div class="clear"> </div>
		</div>
	</div>
<script>
document.getElementById("bt1").onclick = function () { 
	var myselect=document.getElementById("slc");
	var index=myselect.selectedIndex;
	test(myselect.options[index].value); 

};
</script>

</body>
</html>